<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINDGUARD: Big Five & Daily Focus v4.0</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { fontFamily: { sans: ['Plus Jakarta Sans', 'sans-serif'] } } }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="gradient-bg min-h-screen">

    <!-- ============================== -->
    <!-- LOGIN SCREEN                   -->
    <!-- ============================== -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center px-4">
        <div class="w-full max-w-sm">
            <div class="text-center mb-6">
                <h1 class="text-2xl font-black text-slate-800 dark:text-slate-100">ğŸ§  MINDGUARD</h1>
                <p class="text-xs text-slate-400 mt-1">Big Five & Daily Focus Monitor</p>
            </div>
            <div class="card">
                <div class="flex mb-4">
                    <button id="loginTabBtn" onclick="switchAuthTab('login')"
                        class="flex-1 py-2 text-xs font-bold rounded-lg text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 dark:text-indigo-400 transition-all">Masuk</button>
                    <button id="registerTabBtn" onclick="switchAuthTab('register')"
                        class="flex-1 py-2 text-xs font-bold rounded-lg text-slate-400 transition-all">Daftar</button>
                </div>

                <div id="authError"
                    class="hidden mb-3 p-2 bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg text-[11px] text-rose-600 dark:text-rose-400 font-medium">
                </div>

                <div class="space-y-3">
                    <div id="nameField" class="hidden">
                        <label
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 block">Nama</label>
                        <input type="text" id="authName" placeholder="Nama kamu..."
                            class="w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg">
                    </div>
                    <div>
                        <label
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 block">Username</label>
                        <input type="text" id="authUsername" placeholder="Username kamu..."
                            class="w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg">
                    </div>
                    <div>
                        <label
                            class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 block">Password</label>
                        <input type="password" id="authPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                            class="w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg"
                            onkeypress="if(event.key === 'Enter') handleAuth()">
                    </div>
                    <button onclick="handleAuth()" id="authSubmitBtn"
                        class="w-full py-2.5 bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-bold rounded-lg transition-all">
                        Masuk
                    </button>
                </div>
            </div>
            <p class="text-center text-[10px] text-slate-400 mt-3">Data tersimpan aman di cloud â˜ï¸</p>
        </div>
    </div>

    <!-- ============================== -->
    <!-- MAIN APP (hidden until login)  -->
    <!-- ============================== -->
    <div id="mainApp" class="max-w-6xl mx-auto px-6 py-4" style="display: none;">

        <!-- ============================== -->
        <!-- COMPACT HEADER                 -->
        <!-- ============================== -->
        <header class="flex flex-col gap-2 mb-3">
            <!-- Single header line -->
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <h1 class="text-base font-bold text-slate-800 dark:text-slate-100">
                        <span id="greeting">Halo, Herzi</span>
                        <button onclick="editName()"
                            class="text-[10px] text-indigo-400 hover:text-indigo-500 ml-0.5">âœï¸</button>
                    </h1>
                    <span class="text-[10px] text-slate-400 font-medium" id="currentDate"></span>
                </div>
                <div class="flex items-center gap-1.5">
                    <span
                        class="text-[11px] font-bold text-orange-500 bg-orange-50 dark:bg-orange-900/20 px-2 py-0.5 rounded-md">ğŸ”¥
                        <span id="streakCounter">0</span></span>
                    <span
                        class="text-[11px] font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 px-2 py-0.5 rounded-md">â­
                        <span id="levelDisplay">Lvl 1</span> <span class="text-slate-400" id="xpDisplay">0
                            XP</span></span>
                    <div class="flex items-center gap-1 bg-slate-50 dark:bg-slate-800 px-1.5 py-0.5 rounded-md">
                        <span class="text-[10px] text-slate-400">âš¡</span>
                        <input type="range" min="0" max="100" value="50" class="w-20" id="energySlider"
                            oninput="updateEnergy(this.value)">
                        <span class="text-[10px] font-bold text-indigo-500 w-14" id="energyLabel">Medium</span>
                    </div>
                    <div class="w-20">
                        <div class="flex justify-between text-[8px] text-slate-400 mb-0.5">
                            <span>XP</span>
                            <span id="xpProgress">0/100</span>
                        </div>
                        <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-1">
                            <div id="xpBar" class="bg-indigo-500 h-full rounded-full transition-all duration-300"
                                style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="flex items-center gap-0.5 ml-1">
                        <button onclick="toggleDarkMode()"
                            class="p-1 text-xs bg-slate-100 dark:bg-slate-700 rounded hover:bg-slate-200 dark:hover:bg-slate-600"><span
                                id="darkModeIcon">ğŸŒ™</span></button>
                        <button onclick="showXPShop()"
                            class="p-1 text-xs bg-slate-100 dark:bg-slate-700 rounded hover:bg-slate-200 dark:hover:bg-slate-600"
                            title="XP Shop">ğŸ›’</button>
                        <button onclick="showAchievements()"
                            class="p-1 text-xs bg-slate-100 dark:bg-slate-700 rounded hover:bg-slate-200 dark:hover:bg-slate-600"
                            title="Achievements">ğŸ†</button>
                        <button onclick="showKeyboardHelp()"
                            class="p-1 text-xs bg-slate-100 dark:bg-slate-700 rounded hover:bg-slate-200 dark:hover:bg-slate-600"
                            title="Shortcuts">âŒ¨ï¸</button>
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <nav class="tab-nav">
                <button class="tab-btn active" onclick="switchTab('utama')">ğŸ§  Monitor & Misi</button>
                <button class="tab-btn" onclick="switchTab('catatan')">ğŸ“’ Catatan</button>
                <button class="tab-btn" onclick="switchTab('lainnya')">âš™ï¸ Lainnya</button>
            </nav>
        </header>

        <!-- ============================== -->
        <!-- TAB 1: MONITOR & MISI (MERGED) -->
        <!-- ============================== -->
        <div id="panel-utama" class="tab-panel active">
            <div class="grid grid-cols-12 gap-4">

                <!-- LEFT: Status + Big Five (5/12) -->
                <div class="col-span-5 space-y-3">

                    <!-- Status Kepribadian -->
                    <div class="card">
                        <p class="section-label">ğŸ§  Status Kepribadianmu</p>
                        <div class="space-y-2" id="progressSummary"></div>
                    </div>

                    <!-- Big Five Monitor -->
                    <div class="card">
                        <div class="flex items-center justify-between mb-3">
                            <p class="section-label mb-0">ğŸ“Š Big Five Monitor</p>
                            <button onclick="showBigFiveInfo()"
                                class="text-[10px] text-indigo-400 hover:text-indigo-600 font-bold">?</button>
                        </div>
                        <div id="bigFiveMeters" class="space-y-3"></div>

                        <!-- Personality Insight -->
                        <div
                            class="mt-3 p-2.5 bg-violet-50 dark:bg-violet-900/15 rounded-lg border border-violet-200 dark:border-violet-800">
                            <div class="flex items-start gap-2">
                                <span class="text-sm">ğŸ§ </span>
                                <div class="flex-1">
                                    <p class="font-bold text-violet-800 dark:text-violet-300 text-[10px] mb-1">
                                        Personality Insight</p>
                                    <div id="personalityInsight"
                                        class="text-[11px] text-violet-700 dark:text-violet-300 space-y-0.5"></div>
                                </div>
                            </div>
                        </div>

                        <button onclick="showFaultsModal()"
                            class="w-full mt-2 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-rose-500 hover:text-white dark:hover:bg-rose-600 text-slate-400 rounded-lg font-bold text-[10px] transition-all">
                            ğŸš¨ Diagnosa Kelemahan
                        </button>
                    </div>

                </div>

                <!-- RIGHT: Misi Harian (7/12) -->
                <div class="col-span-7 space-y-3">
                    <div class="card">
                        <div class="flex items-center justify-between mb-2">
                            <p class="section-label mb-0">ğŸ“‹ Misi Harian</p>
                            <button onclick="showTemplateModal()"
                                class="text-[10px] px-2 py-0.5 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 rounded font-bold border border-indigo-100 dark:border-indigo-800">ğŸ“
                                Templates</button>
                        </div>

                        <!-- Add Task -->
                        <div class="flex gap-2 mb-2">
                            <select id="taskPriority"
                                class="px-2 py-1.5 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg">
                                <option value="medium">ğŸ“Œ Med</option>
                                <option value="high">ğŸ”¥ High</option>
                                <option value="low">ğŸ’¡ Low</option>
                            </select>
                            <input type="text" id="taskInput" placeholder="Tambah misi baru..."
                                class="flex-1 px-3 py-1.5 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg"
                                onkeypress="if(event.key === 'Enter') addTask()">
                            <div
                                class="flex items-center gap-1.5 bg-slate-50 dark:bg-slate-700/50 px-2 py-1 rounded-lg">
                                <label class="text-[9px] font-bold text-slate-400">â°</label>
                                <input type="datetime-local" id="taskDeadline"
                                    class="bg-transparent border-none dark:text-slate-200 text-[10px]">
                            </div>
                            <button onclick="addTask()"
                                class="px-4 py-1.5 bg-indigo-500 text-white text-xs rounded-lg font-bold">+
                                Tambah</button>
                        </div>

                        <!-- Task Lists -->
                        <div class="space-y-3">
                            <div id="deadlineSection">
                                <p
                                    class="text-[10px] font-black text-rose-500 uppercase tracking-widest mb-1.5 flex items-center gap-2">
                                    <span>â° Berdeadline</span>
                                    <span class="h-px bg-rose-200 dark:bg-rose-900/50 flex-1"></span>
                                </p>
                                <div id="deadlineTaskList" class="space-y-1"></div>
                            </div>
                            <div id="dailySection">
                                <p
                                    class="text-[10px] font-black text-emerald-500 uppercase tracking-widest mb-1.5 flex items-center gap-2">
                                    <span>âœ… Harian</span>
                                    <span class="h-px bg-emerald-200 dark:bg-emerald-900/50 flex-1"></span>
                                </p>
                                <div id="dailyTaskList" class="space-y-1"></div>
                            </div>
                        </div>

                        <!-- Penalty Buttons (inside card) -->
                        <div class="grid grid-cols-3 gap-2 mt-4 pt-3 border-t border-slate-100 dark:border-slate-700">
                            <button onclick="applyDoomscrollPenalty()"
                                class="py-1.5 text-center text-[10px] font-bold text-rose-500 bg-rose-50 dark:bg-rose-900/20 rounded-lg active:scale-95 transition-transform">
                                ğŸ“± Scrolling
                            </button>
                            <button onclick="wasteGaming()"
                                class="py-1.5 text-center text-[10px] font-bold text-purple-500 bg-purple-50 dark:bg-purple-900/20 rounded-lg active:scale-95 transition-transform">
                                ğŸ® Gaming
                            </button>
                            <button onclick="wasteOversleep()"
                                class="py-1.5 text-center text-[10px] font-bold text-blue-500 bg-blue-50 dark:bg-blue-900/20 rounded-lg active:scale-95 transition-transform">
                                ğŸ›Œ Rebahan
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Quote (full width) -->
            <div
                class="mt-3 rounded-xl bg-gradient-to-r from-slate-700 to-slate-900 dark:from-slate-900 dark:to-black text-center py-2.5 px-6">
                <p class="text-slate-300 italic text-[11px] leading-relaxed" id="quote"></p>
            </div>
        </div>

        <!-- ============================== -->
        <!-- TAB 3: CATATAN                 -->
        <!-- ============================== -->
        <div id="panel-catatan" class="tab-panel">

            <!-- Journal -->
            <div class="card mb-4">
                <div class="flex items-center justify-between mb-3">
                    <p class="section-label mb-0">ğŸ“’ Daily Journal</p>
                    <button onclick="showHistoryModal()"
                        class="text-[10px] px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-500 rounded-lg font-bold">ğŸ•’
                        Riwayat</button>
                </div>
                <textarea id="journalText"
                    class="w-full h-28 px-3 py-2.5 text-sm border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-xl resize-none mb-3"
                    placeholder="Tulis apa yang kamu pelajari hari ini..."
                    oninput="saveJournalAndSyncHistory()"></textarea>

                <div id="todayPreview"
                    class="p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-dashed border-slate-200 dark:border-slate-600">
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Ringkasan Hari Ini
                    </p>
                    <div id="todayProgressSummary" class="text-xs text-slate-500 dark:text-slate-300">
                        Belum ada aktivitas tercatat.
                    </div>
                </div>
            </div>

            <!-- Planning -->
            <div class="card mb-4">
                <p class="section-label">ğŸš€ Vision & Future Planning</p>
                <textarea id="planningText"
                    class="w-full h-28 px-3 py-2.5 text-sm border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-xl resize-none"
                    placeholder="Tulis impian besar, rencana jangka panjang..." oninput="savePlanning()"></textarea>
                <p class="text-[9px] text-slate-400 mt-1.5 italic">"Visi tanpa eksekusi adalah halusinasi."</p>
            </div>

            <!-- Requests -->
            <details class="collapsible card" open>
                <summary class="mb-3">
                    <p class="section-label mb-0">ğŸ¤ Permintaan Orang Lain</p>
                </summary>
                <div class="collapse-body">
                    <div class="flex gap-2 mb-3">
                        <input type="text" id="requestPersonInput" placeholder="Nama..."
                            class="w-1/3 px-2.5 py-2 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg">
                        <input type="text" id="requestInput" placeholder="Permintaannya..."
                            class="flex-1 px-2.5 py-2 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg"
                            onkeypress="if(event.key === 'Enter') addRequest()">
                        <button onclick="addRequest()"
                            class="px-3 py-2 bg-orange-500 text-white text-xs rounded-lg font-bold">+</button>
                    </div>
                    <div id="requestList" class="space-y-1.5 max-h-48 overflow-y-auto"></div>
                </div>
            </details>
        </div>

        <!-- ============================== -->
        <!-- TAB 4: LAINNYA                 -->
        <!-- ============================== -->
        <div id="panel-lainnya" class="tab-panel">

            <!-- Skill Mastery -->
            <details class="collapsible card mb-4" open>
                <summary class="mb-3">
                    <div class="flex items-center gap-2">
                        <p class="section-label mb-0">ğŸ“š Skill Mastery</p>
                        <button id="toggleSkillEditBtn" onclick="event.stopPropagation(); toggleSkillEdit()"
                            class="text-[10px] px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-400 rounded font-bold">Edit</button>
                    </div>
                </summary>
                <div class="collapse-body">
                    <div id="addSkillForm"
                        class="hidden mb-4 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl space-y-2">
                        <div class="flex gap-2">
                            <input type="text" id="newSkillName" placeholder="Nama Skill..."
                                class="flex-1 px-2.5 py-1.5 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg">
                            <input type="text" id="newSkillIcon" placeholder="Emoji"
                                class="w-12 px-2 py-1.5 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg text-center">
                        </div>
                        <div class="flex gap-2">
                            <select id="newSkillColor"
                                class="flex-1 px-2.5 py-1.5 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg">
                                <option value="cyan">Cyan</option>
                                <option value="rose">Rose</option>
                                <option value="emerald">Emerald</option>
                                <option value="amber">Amber</option>
                                <option value="indigo">Indigo</option>
                                <option value="purple">Purple</option>
                            </select>
                            <button onclick="addSkill()"
                                class="px-3 py-1.5 bg-indigo-500 text-white text-xs rounded-lg font-bold">Tambah</button>
                        </div>
                    </div>
                    <div id="skillList" class="space-y-4"></div>
                </div>
            </details>

            <!-- Quick Actions -->
            <div class="card">
                <p class="section-label">âš¡ Quick Actions</p>
                <div class="space-y-2">
                    <button onclick="exportData()"
                        class="w-full py-2.5 bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all text-left px-4">
                        ğŸ“¥ Export Data (Backup)
                    </button>
                    <button onclick="importData()"
                        class="w-full py-2.5 bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all text-left px-4">
                        ğŸ“¤ Import Data (Restore)
                    </button>
                    <button onclick="showHistoryModal()"
                        class="w-full py-2.5 bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all text-left px-4">
                        ğŸ“š Riwayat Perkembangan
                    </button>
                    <button onclick="showKeyboardHelp()"
                        class="w-full py-2.5 bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all text-left px-4">
                        âŒ¨ï¸ Keyboard Shortcuts
                    </button>
                </div>
            </div>

            <!-- Logout -->
            <div class="card mt-4">
                <button onclick="if(confirm('Yakin mau logout?')) logout()"
                    class="w-full py-2.5 bg-rose-50 dark:bg-rose-900/20 text-rose-500 rounded-xl text-xs font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 transition-all px-4">
                    ğŸšª Logout
                </button>
            </div>
        </div>

    </div>



    <!-- ============================== -->
    <!-- MODALS (TIDAK DIUBAH)          -->
    <!-- ============================== -->

    <!-- XP Shop Modal -->
    <div id="xpShopModal" class="modal">
        <div
            class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-slate-800 dark:text-slate-100">ğŸ›’ XP Shop</h2>
                <button onclick="closeXPShop()"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-xl">Ã—</button>
            </div>
            <div class="mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl">
                <p class="text-center text-sm font-bold text-indigo-700 dark:text-indigo-300">Your XP: <span
                        id="shopXPDisplay">0</span> XP</p>
            </div>
            <div class="space-y-3" id="shopItems"></div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievementsModal" class="modal">
        <div
            class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-slate-800 dark:text-slate-100">ğŸ† Achievements</h2>
                <button onclick="closeAchievements()"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-xl">Ã—</button>
            </div>
            <div id="achievementsList" class="grid grid-cols-2 gap-3"></div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div id="keyboardModal" class="modal">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold text-slate-800 dark:text-slate-100">âŒ¨ï¸ Shortcuts</h2>
                <button onclick="closeKeyboardHelp()"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-xl">Ã—</button>
            </div>
            <div class="space-y-2 text-sm text-slate-700 dark:text-slate-300">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Navigasi</p>
                <div class="flex justify-between"><span
                        class="font-mono bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-xs">â†
                        â†’</span><span>Pindah Tab</span></div>
                <div class="flex justify-between"><span
                        class="font-mono bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-xs">Ctrl+1/2/3</span><span>Tab
                        Langsung</span></div>
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-3">Aksi</p>
                <div class="flex justify-between"><span
                        class="font-mono bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-xs">Ctrl+N</span><span>New
                        Task</span></div>
                <div class="flex justify-between"><span
                        class="font-mono bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-xs">Ctrl+D</span><span>Dark
                        Mode</span></div>
                <div class="flex justify-between"><span
                        class="font-mono bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-xs">?</span><span>Help</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Big Five Info Modal -->
    <div id="bigFiveModal" class="modal">
        <div
            class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-2xl w-full mx-4 max-h-[85vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold text-slate-800 dark:text-slate-100">ğŸ“Š Big Five Personality</h2>
                <button onclick="closeBigFiveInfo()"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-xl">Ã—</button>
            </div>
            <div class="space-y-4 text-slate-700 dark:text-slate-300">
                <div class="p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl border-l-4 border-purple-500">
                    <h3 class="font-bold text-sm text-purple-700 dark:text-purple-400 mb-1">ğŸ”® Keterbukaan</h3>
                    <p class="text-xs mb-1"><strong>Tinggi:</strong> Suka belajar hal baru, kreatif, tapi hati-hati
                        "Shiny Object Syndrome".</p>
                    <p class="text-xs"><strong>Rendah:</strong> Suka cara lama yang terbukti, stabil, bisa terjebak zona
                        nyaman.</p>
                </div>
                <div class="p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border-l-4 border-indigo-500">
                    <h3 class="font-bold text-sm text-indigo-700 dark:text-indigo-400 mb-1">ğŸ¯ Kedisiplinan</h3>
                    <p class="text-xs mb-1"><strong>Tinggi:</strong> Sangat produktif, jarang menunda, kunci
                        "Anti-Malas".</p>
                    <p class="text-xs"><strong>Rendah:</strong> Sering menunda, gampang terdistraksi, kurang terencana.
                    </p>
                </div>
                <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border-l-4 border-blue-500">
                    <h3 class="font-bold text-sm text-blue-700 dark:text-blue-400 mb-1">ğŸŒŸ Kesosialan</h3>
                    <p class="text-xs mb-1"><strong>Tinggi:</strong> Produktif kerja bareng, tapi gampang terdistraksi
                        sosmed.</p>
                    <p class="text-xs"><strong>Rendah:</strong> Lebih produktif saat sendirian (Deep Work).</p>
                </div>
                <div class="p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border-l-4 border-emerald-500">
                    <h3 class="font-bold text-sm text-emerald-700 dark:text-emerald-400 mb-1">ğŸ’š Keramahan</h3>
                    <p class="text-xs mb-1"><strong>Tinggi:</strong> Sifat "Gak Enakan", sering korbankan kerjaan demi
                        bantu orang.</p>
                    <p class="text-xs"><strong>Rendah:</strong> Tegas, fokus target pribadi dulu.</p>
                </div>
                <div class="p-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl border-l-4 border-rose-500">
                    <h3 class="font-bold text-sm text-rose-700 dark:text-rose-400 mb-1">ğŸ˜° Kecemasan</h3>
                    <p class="text-xs mb-1"><strong>Tinggi:</strong> Overthinking, saat stres bisa burnout.</p>
                    <p class="text-xs"><strong>Rendah:</strong> Tetap tenang, langsung praktek (gaspol).</p>
                </div>
                <div class="p-3 bg-slate-50 dark:bg-slate-900/30 rounded-xl text-center">
                    <p class="text-xs font-bold text-indigo-600 dark:text-indigo-400">ğŸš€ Misi: Naikkan Kedisiplinan &
                        Jaga Kecemasan!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Faults Modal -->
    <div id="faultsModal" class="modal">
        <div
            class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-lg w-full mx-4 max-h-[85vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold text-rose-600 dark:text-rose-400">ğŸš¨ Diagnosa Karakter</h2>
                <button onclick="closeFaultsModal()"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 text-xl">Ã—</button>
            </div>
            <div id="faultsDetailContent" class="space-y-4"></div>
            <button onclick="closeFaultsModal()"
                class="w-full mt-6 py-2.5 bg-rose-500 text-white rounded-xl font-bold text-sm">Saya Mengerti & Akan
                Berubah</button>
        </div>
    </div>

    <!-- Template Modal -->
    <div id="templateModal" class="modal">
        <div
            class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold text-slate-800 dark:text-slate-100">ğŸ“ Templates</h2>
                <button onclick="closeTemplateModal()"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-xl">Ã—</button>
            </div>
            <div
                class="mb-6 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800">
                <p class="text-xs font-bold text-indigo-700 dark:text-indigo-400 mb-2 uppercase tracking-wider">Simpan
                    Misi Jadi Template</p>
                <div class="flex gap-2">
                    <input type="text" id="templateNameInput" placeholder="Nama Template..."
                        class="flex-1 px-3 py-1.5 text-xs border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200 rounded-lg">
                    <button onclick="saveCurrentAsTemplate()"
                        class="px-3 py-1.5 bg-indigo-500 text-white text-xs rounded-lg font-bold">Simpan</button>
                </div>
            </div>
            <div id="templateList" class="space-y-3"></div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="modal">
        <div
            class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-3xl w-full mx-4 max-h-[85vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold text-slate-800 dark:text-slate-100">ğŸ“š Riwayat Harian</h2>
                <button onclick="closeHistoryModal()"
                    class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-xl">Ã—</button>
            </div>
            <div
                class="mb-4 p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border border-emerald-100 dark:border-emerald-800">
                <p class="text-xs text-emerald-800 dark:text-emerald-300"><strong>Tips:</strong> Riwayat ini mencatat
                    perubahan kepribadian, jurnal, dan misi setiap harinya.</p>
            </div>
            <div id="historyEntries" class="space-y-4"></div>
        </div>
    </div>

    <input type="file" id="importFileInput" accept=".json" style="display:none" onchange="handleImport(event)">

    <script src="js/data.js"></script>
    <script src="js/db.js"></script>
    <script src="js/app.js"></script>
</body>

</html>